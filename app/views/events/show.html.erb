<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
  <link href='https://fonts.googleapis.com/css?family=Roboto:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/style.css">
  <link href="css/animate.css" rel="stylesheet">
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.easing.min.js"></script>

</head>
<body>

<div class="container-fluid content-box-show row" style="padding-left:5vw; padding-right:5vw;">
  <div class="row" style="  min-height: 760px; border:solid 1px; margin-top:107px; background-color:#191919; padding:60px;">

    <div class="col-md-6">
      <div class="row">
        <div id="shown-img" class="img-responsive" style="background-color:white; height:550px; width:550px;"></div>
      </div>

    </div>
    <div class="col-md-6">
      <!--<div class="show-event-content">
        <h1 class="event-name"><b><%= @event.name %></b></h1>
        <p><%= @event.description %></p>
      </div>-->
        <h1 class="event-name"><b><%= @event.name %></b></h1>
        <%if @event.website!="" %>
        <div class="rob" style="color:rgb(180,180,180); width:470px; font-weight:300; font-size:20px; margin-top:16px;">
            <a href="http://<%= @event.website %>"><%= @event.website %></a>
          </div>
        <%end%>
          <div class="rob" style="color:rgb(180,180,180); width:470px; font-weight:300; font-size:20px; margin-top:16px;">
            <%= @event.start_date %>
          </div>
        <div class="rob" style="color:rgb(180,180,180); width:470px;  margin-top:16px;   font-family: 'Roboto' !important; font-style: normal;font-weight: 300;font-size:20px;">
            <%= @event.address %>
          </div>

          <div class="rob" style="color:rgb(180,180,180); max-width:70%px; font-weight:100; font-size:20px; margin-top:16px;">
             <span style="line-height:110%;"><%= @event.description %></span>

          </div>

               <% if user_signed_in? %>
                  <% if @event.user_id == current_user.id %>
                    <%= link_to 'Edit', edit_event_path(@event) %> |
                <% else %>
                    <% if @attended.empty? %>
                      <%= button_to 'Join', join_event_path(@event.id), :class=>"jb", :method=>:get%>
                    <% else %>
                      <%= button_to 'Leave', leave_event_path(@event.id), :class=>"jb", :method=>:get%>
                    <% end %>
                <% end %>
              <% end %>





    </div>

  </div>
  <div class="row" style="min-height: 760px; border:solid 0px; margin-top:10px; background-color:transparent;">

    <div id="map" class="col-md-8" style=" height: 560px;">
    </div>
    <div class="col-md-4" style=" height: 560px; background-color: #A02A26;    background-clip: padding-box; border-left: 10px solid transparent;">
      <div class="bubble" style="padding-top:7px; margin-left:25px;">
    <center >
    <h5 style="margin:0px;">Organizer</h5>
    </center>

      </div>


      <div class="row" style="height:62px;  width:315px; position:inherit; margin:25px;">
        
          <div class="col-sm-3" style="padding:0px;">
              <div class="circle"></div>
          </div>

          <div class="col-sm-8" style="padding:0px"><h4 class="people"><%= @event.user %></h4></div>
      

      </div>

      <div style="">
        <hr>
      </div>



    <div class="bubble" style="padding-top:7px; margin:0px 0px 0px 25px;">
        <center >
    <h5 style="margin:0px;">
      <% if @attendee_count == 1 %>
    <%= @attendee_count %> Attendee 
  <% else %>
    <%= @attendee_count %> Attendees
  <% end %>
    </h5>
    </center>

      </div>
    <% @last_three_attendees.each do |u| %>
      <div class="row" style="height:62px;  width:315px; position:inherit; margin:25px;">
        
          <div class="col-sm-3" style="padding:0px;">
              <div class="circle"></div>
          </div>

          <div class="col-sm-8" style="padding:0px"><h4 class="people"><%= u.user %></h4></div>
      </div>


    <% end %>
  

</div>
    </div>

  </div>

</div>
  <p id="notice"><%= notice %></p>

  <p>
    <strong>Start date:</strong>
    <%= @event.start_date %>
  </p>

  <p>
    <strong>End date:</strong>
    <%= @event.end_date %>
  </p>

  <p>
    <strong>Website:</strong>
    <%= @event.website %>
  </p>

  <p>
    <strong>Attendees:</strong><br />
    <% @last_three_attendees.each do |u| %>
      <%= u.user %>
    <% end %>
  </p>

  <% if @event_tags.any? %>
    <p>
      <strong>Tags:</strong><br />
      <% @event_tags.reverse.drop(1).reverse.each do |event_tag| %>
        <%= event_tag.tag.name %>, 
      <% end %>
      <%= @event_tags.last.tag.name %>
    </p>
  <% end %>


  <%= link_to 'Back', events_path %>
  <input type="button" value="Show Location"
    onclick="javascript:calcRoute()" />   <br/>
 
Latitude: <span id="latitude"></span>       <br/>
 
Longitude: <span id="longitude"></span>
<footer class="footer" style="margin-top:120px">


  <h6 style="color:white;">About us | Terms and Condition | Copyright 2015</h6>
</footer>

<script src="//maps.google.com/maps/api/js?v=3.18&sensor=false&client=&key=&libraries=geometry&language=&hl=&region="></script> 
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->
  
<script type="text/javascript">
handler = Gmaps.build('Google');
handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
  markers = handler.addMarkers(<%=raw @hash.to_json %>);
  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();
  handler.getMap().setZoom(17);
});
function showlocation() {
   // One-shot position request.
   navigator.geolocation.getCurrentPosition(callback);
}
 
function callback(position) {
   document.getElementById('latitude').innerHTML = position.coords.latitude;
   document.getElementById('longitude').innerHTML = position.coords.longitude;
}

var directionsDisplay = new google.maps.DirectionsRenderer();
var directionsService = new google.maps.DirectionsService();

function calcRoute() {
  var origin      = new google.maps.LatLng(14.6207466, 121.1317681);
  var destination = new google.maps.LatLng(<%=@event.latitude%>, <%=@event.longitude%>);
  var request = {
      origin:      origin,
      destination: destination,
      travelMode:  google.maps.TravelMode.DRIVING
  };
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(response);
    }
  });
  var handler = Gmaps.build('Google');
handler.buildMap({ internal: {id: 'map'}}, function(){
  directionsDisplay.setMap(handler.getMap());
});

}

</script>
</body>
</html>
